
# ğŸš€ SpeedHiveHome

åŸºäº Lucky è½¯è·¯ç”±è®¾å¤‡çŠ¶æ€çš„æ™ºèƒ½ qBittorrent é™é€Ÿæ§åˆ¶ç³»ç»Ÿã€‚å½“ Lucky æ£€æµ‹åˆ°ç½‘ç»œæ´»åŠ¨æ—¶ï¼Œè‡ªåŠ¨é™åˆ¶ qBittorrent çš„ä¸Šä¼ /ä¸‹è½½é€Ÿåº¦ï¼Œç¡®ä¿ä¸å½±å“æ­£å¸¸ä¸Šç½‘ä½“éªŒã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ¯ è‡ªåŠ¨é™é€Ÿæ§åˆ¶
- **æ™ºèƒ½æ£€æµ‹**ï¼šå®æ—¶ç›‘æ§ Lucky è®¾å¤‡çš„ç½‘ç»œè¿æ¥æ•°
- **å»¶è¿Ÿè§¦å‘**ï¼šæ”¯æŒé™é€Ÿè§¦å‘å»¶è¿Ÿå’Œæ¢å¤å»¶è¿Ÿï¼Œé¿å…é¢‘ç¹åˆ‡æ¢
- **åŠ æƒè®¡ç®—**ï¼šæ”¯æŒå¤šè®¾å¤‡åŠ æƒç›‘æ§ï¼Œçµæ´»é€‚åº”ä¸åŒåœºæ™¯
- **å¹³æ»‘åˆ‡æ¢**ï¼šçŠ¶æ€æœºè®¾è®¡ï¼Œç¡®ä¿é™é€Ÿåˆ‡æ¢å¹³ç¨³å¯é 

### ğŸ“Š å®æ—¶ç›‘æ§
- **å¤šè®¾å¤‡æ”¯æŒ**ï¼šå¯åŒæ—¶ç›‘æ§å¤šä¸ª Lucky è®¾å¤‡
- **å¤šå®ä¾‹ç®¡ç†**ï¼šæ”¯æŒæ§åˆ¶å¤šä¸ª qBittorrent å®ä¾‹
- **Web ç•Œé¢**ï¼šç°ä»£åŒ–çš„å®æ—¶ç›‘æ§ä»ªè¡¨æ¿
- **çŠ¶æ€å¯è§†åŒ–**ï¼šç›´è§‚æ˜¾ç¤ºé™é€ŸçŠ¶æ€ã€è¿æ¥æ•°ã€é€Ÿåº¦ç­‰ä¿¡æ¯

### ğŸ”§ é…ç½®ç®¡ç†
- **YAML é…ç½®**ï¼šç®€å•ç›´è§‚çš„é…ç½®æ–‡ä»¶æ ¼å¼
- **çµæ´»æ§åˆ¶**ï¼šæ¯ä¸ªè®¾å¤‡å’Œå®ä¾‹å¯ç‹¬ç«‹å¯ç”¨/ç¦ç”¨
- **å‚æ•°è°ƒæ•´**ï¼šè½®è¯¢é—´éš”ã€å»¶è¿Ÿæ—¶é—´ã€é€Ÿåº¦é™åˆ¶ç­‰å…¨éƒ¨å¯é…ç½®

### ğŸ“ æ—¥å¿—ç³»ç»Ÿ
- **å¤šçº§æ—¥å¿—**ï¼šæ§åˆ¶å° + æ–‡ä»¶æ—¥å¿—
- **è‡ªåŠ¨è½®è½¬**ï¼šæ—¥å¿—æ–‡ä»¶å¤§å°æ§åˆ¶å’Œè‡ªåŠ¨å¤‡ä»½
- **é”™è¯¯è¿½è¸ª**ï¼šå•ç‹¬çš„é”™è¯¯æ—¥å¿—æ–‡ä»¶ä¾¿äºæ’æŸ¥é—®é¢˜

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Web æ§åˆ¶é¢æ¿                          â”‚
â”‚              (å®æ—¶ç›‘æ§ + çŠ¶æ€æ˜¾ç¤º)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†• API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SpeedController (æ ¸å¿ƒæ§åˆ¶å™¨)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  çŠ¶æ€æœºï¼šæ­£å¸¸ âŸ· é™é€Ÿä¸­                           â”‚    â”‚
â”‚  â”‚  - æ£€æµ‹è¿æ¥æ•°                                    â”‚    â”‚
â”‚  â”‚  - å€’è®¡æ—¶æ§åˆ¶                                    â”‚    â”‚
â”‚  â”‚  - è‡ªåŠ¨åˆ‡æ¢é™é€Ÿ                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ ç›‘æ§                    â†“ æ§åˆ¶
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Lucky Monitor   â”‚      â”‚  qBit Manager    â”‚
â”‚  - API è½®è¯¢       â”‚      â”‚  - é€Ÿåº¦é™åˆ¶       â”‚
â”‚  - è¿æ¥æ•°è§£æ     â”‚      â”‚  - çŠ¶æ€æŸ¥è¯¢       â”‚
â”‚  - åŠ æƒè®¡ç®—       â”‚      â”‚  - ä¼šè¯ç®¡ç†       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Lucky è®¾å¤‡      â”‚      â”‚  qBittorrent     â”‚
â”‚  (è½¯è·¯ç”±)        â”‚      â”‚  (ä¸‹è½½å®¢æˆ·ç«¯)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“š æ–‡æ¡£å¯¼èˆª

- **[ğŸ“– å®Œæ•´æ‰‹å†Œ](MANUAL.md)** - åŒ…å«æ‰€æœ‰é…ç½®ã€éƒ¨ç½²ã€ç»´æŠ¤å’Œæ•…éšœæ’é™¤ä¿¡æ¯
- **[ğŸ”§ è‡ªå®šä¹‰è·¯å¾„éƒ¨ç½²æŒ‡å—](CUSTOM_PATH_DEPLOYMENT.md)** - é€‚é…ç‰¹å®šè·¯å¾„çš„éƒ¨ç½²è¯´æ˜
- **[â“ å¸¸è§é—®é¢˜è§£ç­”](FAQ.md)** - é…ç½®ã€è¿æ¥ã€éƒ¨ç½²ç­‰å¸¸è§é—®é¢˜
- [ğŸš€ æ ‡å‡†éƒ¨ç½²è„šæœ¬](deploy_debian.sh) - é¦–æ¬¡éƒ¨ç½²è„šæœ¬

## ğŸ› ï¸ å®ç”¨å·¥å…·è„šæœ¬

- **`init_config.sh`** - åˆå§‹åŒ–é…ç½®æ–‡ä»¶å’Œç›®å½•
- **`diagnose.sh`** - è¯Šæ–­å®¹å™¨å’Œé…ç½®é—®é¢˜
- **`fix_config.sh`** - å¿«é€Ÿä¿®å¤é…ç½®é—®é¢˜

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Docker å’Œ Docker Compose
- Lucky è½¯è·¯ç”±ï¼ˆæ”¯æŒ API è®¿é—®ï¼‰
- qBittorrentï¼ˆæ”¯æŒ Web APIï¼‰

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/yourusername/qbit-smart-controller.git
cd qbit-smart-controller
```

### 2. é…ç½®æ–‡ä»¶

ç¼–è¾‘ `config/config.yaml`ï¼š

```yaml
# Lucky è®¾å¤‡é…ç½®
lucky_devices:
  - name: "æˆ‘çš„Luckyè®¾å¤‡"
    api_url: "http://192.168.1.100:16601/api/webservice/rules?openToken=YOUR_TOKEN"
    weight: 1.0
    enabled: true
    description: "ä¸»è¦ç›‘æ§è®¾å¤‡"

# qBittorrent å®ä¾‹é…ç½®
qbittorrent_instances:
  - name: "æˆ‘çš„QBå®ä¾‹"
    host: "http://192.168.1.200:8080"
    username: "admin"
    password: "your_password"
    enabled: true
    description: "ä¸»ä¸‹è½½æœåŠ¡å™¨"

# æ§åˆ¶å™¨è®¾ç½®
controller_settings:
  poll_interval: 2          # çŠ¶æ€é‡‡é›†é¢‘ç‡ï¼ˆç§’ï¼‰
  limit_on_delay: 5         # é™é€Ÿè§¦å‘å»¶è¿Ÿï¼ˆç§’ï¼‰
  limit_off_delay: 30       # æ¢å¤å…¨é€Ÿå»¶è¿Ÿï¼ˆç§’ï¼‰
  retry_interval: 10        # é‡è¿é—´éš”ï¼ˆç§’ï¼‰
  
  # é€Ÿåº¦é™åˆ¶ (KB/s)
  limited_download: 1024    # é™é€Ÿæ—¶çš„ä¸‹è½½é€Ÿåº¦
  limited_upload: 512       # é™é€Ÿæ—¶çš„ä¸Šä¼ é€Ÿåº¦
  normal_download: 0        # æ­£å¸¸æ—¶çš„ä¸‹è½½é€Ÿåº¦ (0=ä¸é™é€Ÿ)
  normal_upload: 0          # æ­£å¸¸æ—¶çš„ä¸Šä¼ é€Ÿåº¦ (0=ä¸é™é€Ÿ)
```

### 3. å¯åŠ¨æœåŠ¡

```bash
# ä½¿ç”¨ Docker Compose å¯åŠ¨
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down
```

### 4. è®¿é—®ç•Œé¢

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:5000`

## ğŸ”„ æ›´æ–°é¡¹ç›®

### å¿«é€Ÿæ›´æ–°ï¼ˆæ¨èï¼‰

é€‚ç”¨äºæ—¥å¸¸ä»£ç æ›´æ–°ï¼š

```bash
cd ~/qbit-smart-controller
./quick_update.sh
```

### å®Œæ•´æ›´æ–°

é€‚ç”¨äºæœ‰ Docker é…ç½®æˆ–ä¾èµ–å˜æ›´ï¼š

```bash
cd ~/qbit-smart-controller
./update.sh
```

### å®Œå…¨é‡ç½®

é‡åˆ°é—®é¢˜æ—¶ä½¿ç”¨ï¼š

```bash
cd ~/qbit-smart-controller
./reset.sh
```

**è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ï¼š[å®Œæ•´æ‰‹å†Œ](MANUAL.md)**

## ğŸ“– è¯¦ç»†è¯´æ˜

### é…ç½®å‚æ•°è¯¦è§£

#### Lucky è®¾å¤‡é…ç½®

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `name` | è®¾å¤‡åç§°ï¼ˆè‡ªå®šä¹‰ï¼‰ | å¿…å¡« |
| `api_url` | Lucky API åœ°å€ï¼ˆåŒ…å« tokenï¼‰ | å¿…å¡« |
| `weight` | æƒé‡ç³»æ•°ï¼ˆç”¨äºå¤šè®¾å¤‡åŠ æƒï¼‰ | 1.0 |
| `enabled` | æ˜¯å¦å¯ç”¨æ­¤è®¾å¤‡ | true |
| `description` | è®¾å¤‡æè¿° | å¯é€‰ |

**è·å– Lucky API Tokenï¼š**
1. ç™»å½• Lucky ç®¡ç†ç•Œé¢
2. è¿›å…¥ã€Œç³»ç»Ÿè®¾ç½®ã€â†’ã€ŒAPI ç®¡ç†ã€
3. ç”Ÿæˆæˆ–æŸ¥çœ‹ Open Token
4. API åœ°å€æ ¼å¼ï¼š`http://IP:PORT/api/webservice/rules?openToken=YOUR_TOKEN`

#### qBittorrent é…ç½®

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `name` | å®ä¾‹åç§°ï¼ˆè‡ªå®šä¹‰ï¼‰ | å¿…å¡« |
| `host` | qBittorrent Web UI åœ°å€ | å¿…å¡« |
| `username` | Web UI ç”¨æˆ·å | å¿…å¡« |
| `password` | Web UI å¯†ç  | å¿…å¡« |
| `enabled` | æ˜¯å¦å¯ç”¨æ­¤å®ä¾‹ | true |
| `description` | å®ä¾‹æè¿° | å¯é€‰ |

**qBittorrent é…ç½®è¦æ±‚ï¼š**
1. å¯ç”¨ Web UIï¼šã€Œå·¥å…·ã€â†’ã€Œé€‰é¡¹ã€â†’ã€ŒWeb UIã€
2. å…è®¸è¿œç¨‹è¿æ¥
3. è®°å½•ç”¨æˆ·åå’Œå¯†ç 

#### æ§åˆ¶å™¨è®¾ç½®

| å‚æ•° | è¯´æ˜ | æ¨èå€¼ |
|------|------|--------|
| `poll_interval` | çŠ¶æ€é‡‡é›†é¢‘ç‡ï¼ˆç§’ï¼‰ | 2-5 |
| `limit_on_delay` | é™é€Ÿè§¦å‘å»¶è¿Ÿï¼ˆç§’ï¼‰ | 5-10 |
| `limit_off_delay` | æ¢å¤å…¨é€Ÿå»¶è¿Ÿï¼ˆç§’ï¼‰ | 30-60 |
| `retry_interval` | è¿æ¥å¤±è´¥é‡è¯•é—´éš”ï¼ˆç§’ï¼‰ | 10 |
| `limited_download` | é™é€Ÿæ—¶ä¸‹è½½é€Ÿåº¦ï¼ˆKB/sï¼‰ | 1024 |
| `limited_upload` | é™é€Ÿæ—¶ä¸Šä¼ é€Ÿåº¦ï¼ˆKB/sï¼‰ | 512 |
| `normal_download` | æ­£å¸¸æ—¶ä¸‹è½½é€Ÿåº¦ï¼ˆKB/sï¼Œ0=ä¸é™é€Ÿï¼‰ | 0 |
| `normal_upload` | æ­£å¸¸æ—¶ä¸Šä¼ é€Ÿåº¦ï¼ˆKB/sï¼Œ0=ä¸é™é€Ÿï¼‰ | 0 |

### å·¥ä½œåŸç†

```
1. Lucky æ£€æµ‹åˆ°ç½‘ç»œè¿æ¥
   â†“
2. ç´¯ç§¯åŠ æƒè¿æ¥æ•° > 0
   â†“
3. ç­‰å¾… limit_on_delay ç§’
   â†“
4. è§¦å‘é™é€Ÿï¼šè®¾ç½®ä¸º limited_download/upload
   â†“
5. Lucky è¿æ¥æ¶ˆå¤±
   â†“
6. ç­‰å¾… limit_off_delay ç§’
   â†“
7. æ¢å¤å…¨é€Ÿï¼šè®¾ç½®ä¸º normal_download/upload
```

### å¤šè®¾å¤‡æƒé‡è®¡ç®—

å¦‚æœé…ç½®äº†å¤šä¸ª Lucky è®¾å¤‡ï¼Œç³»ç»Ÿä¼šè®¡ç®—åŠ æƒæ€»è¿æ¥æ•°ï¼š

```
æ€»åŠ æƒè¿æ¥æ•° = Î£(è®¾å¤‡è¿æ¥æ•° Ã— è®¾å¤‡æƒé‡)
```

**ç¤ºä¾‹ï¼š**
- è®¾å¤‡Aï¼š3ä¸ªè¿æ¥ï¼Œæƒé‡ 1.0 â†’ è´¡çŒ® 3.0
- è®¾å¤‡Bï¼š2ä¸ªè¿æ¥ï¼Œæƒé‡ 0.5 â†’ è´¡çŒ® 1.0
- **æ€»è®¡ï¼š4.0 ä¸ªåŠ æƒè¿æ¥**

## ğŸ”Œ API æ¥å£

### çŠ¶æ€æŸ¥è¯¢

```bash
# æœåŠ¡çŠ¶æ€
GET /api/status

# é…ç½®ä¿¡æ¯
GET /api/config

# Lucky è®¾å¤‡çŠ¶æ€
GET /api/lucky/status

# qBittorrent çŠ¶æ€
GET /api/qbit/status

# æ§åˆ¶å™¨çŠ¶æ€
GET /api/controller/state

# å¥åº·æ£€æŸ¥
GET /health
```

### è¿æ¥æµ‹è¯•

```bash
# æµ‹è¯• Lucky è¿æ¥
GET /api/test/lucky/{device_index}

# æµ‹è¯• qBittorrent è¿æ¥
GET /api/test/qbit/{instance_index}
```

### æ§åˆ¶å™¨ç®¡ç†

```bash
# å¯åŠ¨æ§åˆ¶å™¨
POST /api/controller/start

# åœæ­¢æ§åˆ¶å™¨
POST /api/controller/stop
```

## ğŸ“Š æ—¥å¿—ç®¡ç†

### æ—¥å¿—ä½ç½®

```
data/logs/
â”œâ”€â”€ controller.log      # ä¸»æ—¥å¿—ï¼ˆ10MBï¼Œä¿ç•™5ä»½ï¼‰
â”œâ”€â”€ error.log          # é”™è¯¯æ—¥å¿—ï¼ˆ10MBï¼Œä¿ç•™3ä»½ï¼‰
â””â”€â”€ controller.log.1   # å†å²æ—¥å¿—
```

### æŸ¥çœ‹æ—¥å¿—

```bash
# å®æ—¶æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹æ–‡ä»¶æ—¥å¿—
tail -f data/logs/controller.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f data/logs/error.log
```

## ğŸ› æ•…éšœæ’æŸ¥

### 1. Lucky è¿æ¥å¤±è´¥

**ç—‡çŠ¶ï¼š** Web ç•Œé¢æ˜¾ç¤º Lucky è®¾å¤‡ç¦»çº¿æˆ–é”™è¯¯

**æ’æŸ¥æ­¥éª¤ï¼š**
1. æ£€æŸ¥ Lucky API åœ°å€æ˜¯å¦æ­£ç¡®
2. æµ‹è¯• API è®¿é—®ï¼š
   ```bash
   curl "http://YOUR_LUCKY_IP:16601/api/webservice/rules?openToken=YOUR_TOKEN"
   ```
3. æ£€æŸ¥ç½‘ç»œè¿é€šæ€§
4. éªŒè¯ Token æ˜¯å¦è¿‡æœŸ
5. æŸ¥çœ‹æ—¥å¿—ï¼š`grep "Lucky" data/logs/controller.log`

### 2. qBittorrent è¿æ¥å¤±è´¥

**ç—‡çŠ¶ï¼š** Web ç•Œé¢æ˜¾ç¤º QB å®ä¾‹ç¦»çº¿

**æ’æŸ¥æ­¥éª¤ï¼š**
1. ç¡®è®¤ qBittorrent Web UI å·²å¯ç”¨
2. æµ‹è¯•ç™»å½•ï¼š
   ```bash
   curl -X POST "http://YOUR_QB_IP:8080/api/v2/auth/login" \
     -d "username=admin&password=your_pass"
   ```
3. æ£€æŸ¥ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®
4. ç¡®è®¤å…è®¸è¿œç¨‹è¿æ¥
5. æŸ¥çœ‹æ—¥å¿—ï¼š`grep "QB" data/logs/controller.log`

### 3. é™é€Ÿä¸ç”Ÿæ•ˆ

**ç—‡çŠ¶ï¼š** æ£€æµ‹åˆ°è¿æ¥ä½† qBittorrent é€Ÿåº¦æœªæ”¹å˜

**æ’æŸ¥æ­¥éª¤ï¼š**
1. æ£€æŸ¥æ§åˆ¶å™¨çŠ¶æ€ï¼šè®¿é—® `/api/controller/state`
2. æŸ¥çœ‹æ—¥å¿—ä¸­çš„é™é€Ÿæ—¥å¿—ï¼š
   ```bash
   grep "é™é€Ÿ" data/logs/controller.log
   ```
3. ç¡®è®¤ qBittorrent æ²¡æœ‰è®¾ç½®å…¨å±€æœ€å¤§é€Ÿåº¦é™åˆ¶ï¼ˆä¼šè¦†ç›– API è®¾ç½®ï¼‰
4. æ£€æŸ¥ qBittorrent æ›¿ä»£é™é€Ÿè®¾ç½®

### 4. é¢‘ç¹åˆ‡æ¢é™é€ŸçŠ¶æ€

**ç—‡çŠ¶ï¼š** é™é€ŸçŠ¶æ€åå¤åˆ‡æ¢

**è§£å†³æ–¹æ¡ˆï¼š**
1. å¢åŠ  `limit_on_delay` å’Œ `limit_off_delay`
2. è°ƒæ•´ Lucky è®¾å¤‡æƒé‡
3. æ£€æŸ¥ Lucky è¿æ¥æ•°æ˜¯å¦ç¨³å®š

## ğŸ”§ é«˜çº§é…ç½®

### ç¯å¢ƒå˜é‡

åœ¨ `docker-compose.yml` ä¸­å¯é…ç½®ç¯å¢ƒå˜é‡ï¼š

```yaml
environment:
  - TZ=Asia/Shanghai          # æ—¶åŒº
  - LOG_LEVEL=INFO            # æ—¥å¿—çº§åˆ«ï¼šDEBUG/INFO/WARNING/ERROR
  - PYTHONUNBUFFERED=1        # Python è¾“å‡ºä¸ç¼“å†²
```

### è‡ªå®šä¹‰ç«¯å£

ä¿®æ”¹ `docker-compose.yml`ï¼š

```yaml
ports:
  - "5000:5000"  # æ”¹ä¸ºä½ æƒ³è¦çš„ç«¯å£ï¼Œå¦‚ "8888:5000"
```

### æŒä¹…åŒ–æ•°æ®

é¡¹ç›®ä½¿ç”¨ Docker å·æŒä¹…åŒ–æ•°æ®ï¼š

```yaml
volumes:
  - ./config:/app/config      # é…ç½®æ–‡ä»¶
  - ./data:/app/data          # æ—¥å¿—å’Œæ•°æ®
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### èµ„æºå ç”¨

- CPUï¼š< 1%ï¼ˆè½»é‡çº§ç›‘æ§ï¼‰
- å†…å­˜ï¼š< 50MB
- ç£ç›˜ï¼šæ—¥å¿—æ–‡ä»¶çº¦ 50MBï¼ˆè‡ªåŠ¨è½®è½¬ï¼‰

### ä¼˜åŒ–å»ºè®®

1. **è½®è¯¢é—´éš”**ï¼šæ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´ `poll_interval`
   - é«˜å®æ—¶æ€§è¦æ±‚ï¼š1-2ç§’
   - æ™®é€šåœºæ™¯ï¼š2-5ç§’
   - ä½é¢‘æ£€æŸ¥ï¼š5-10ç§’

2. **å»¶è¿Ÿè®¾ç½®**ï¼šé¿å…é¢‘ç¹åˆ‡æ¢
   - `limit_on_delay`ï¼šå»ºè®® 5-10ç§’
   - `limit_off_delay`ï¼šå»ºè®® 30-60ç§’

3. **å¤šè®¾å¤‡æƒé‡**ï¼šæ ¹æ®é‡è¦æ€§åˆ†é…æƒé‡
   - ä¸»è¦è®¾å¤‡ï¼š1.0
   - æ¬¡è¦è®¾å¤‡ï¼š0.5-0.8

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ™ è‡´è°¢

- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£åŒ–çš„ Web æ¡†æ¶
- [qBittorrent](https://www.qbittorrent.org/) - ä¼˜ç§€çš„ BT å®¢æˆ·ç«¯
- [Lucky](https://lucky666.cn/) - å¼ºå¤§çš„è½¯è·¯ç”±å·¥å…·

## ğŸ“ æ”¯æŒ

- é—®é¢˜åé¦ˆï¼š[GitHub Issues](https://github.com/yourusername/qbit-smart-controller/issues)
- ä½¿ç”¨æ–‡æ¡£ï¼š[Wiki](https://github.com/yourusername/qbit-smart-controller/wiki)

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œè¯·ç»™ä¸ª â­ Star å§ï¼**

